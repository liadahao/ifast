"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"classList"in document.documentElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var t=this;function e(e){return function(i){var s=t.className.split(/\s+/g),n=s.indexOf(i);e(s,n,i),t.className=s.join(" ")}}return{add:e(function(t,e,i){~e||t.push(i)}),remove:e(function(t,e){~e&&t.splice(e,1)}),toggle:e(function(t,e,i){~e?t.splice(e,1):t.push(i)}),contains:function(e){return!!~t.className.split(/\s+/g).indexOf(e)},item:function(e){return t.className.split(/\s+/g)[e]||null}}}}),function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t,t.document)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(t,t.document):t.slidePage=e(t,t.document)}("undefined"!=typeof window?window:void 0,function(t,e){var i=!1;try{var s=Object.defineProperty({},"passive",{get:function(){i=!0}});t.addEventListener("test",null,s)}catch(t){}var n=function(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),s=t.location.search.substr(1).match(i);return null!=s?unescape(s[2]):null},a=function(t,e){for(var i in e)t[i]=e[i];return t},r=function(t,e){var i=t.nodeName===e.nodeName,s=t.nodeType===e.nodeType,n=t.innerHTML===e.innerHTML;return t.className.replace(/ transition/g,"")===e.className.replace(/ transition/g,"")&&i&&s&&n},o=function(t){if(t instanceof NodeList||t instanceof HTMLCollection&&t.length>0){for(var e=0,i=0,s=t.length;i<s;i++)t[i]instanceof Element&&e++;return e===s}return t instanceof Element},l={},h=(new Date).getTime(),c={wheelFunc:function(e){e=e||t.event;if(!this.isScroll){var i=(new Date).getTime(),s=i-h;h=i,s<=50||(e.wheelDeltaY<0||e.wheelDelta<0||e.detail>0?this.canSlide&&this.canNext&&this.slideNext():(e.wheelDeltaY>0||e.wheelDelta>0||e.detail<0)&&this.canSlide&&this.canPrev&&this.slidePrev())}},touchStart:function(t){this.canSlide?l.startpoint=t.targetTouches[0].clientY:l.startpoint=-1},touchMove:function(e){if(-1===l.startpoint)return e.preventDefault(),!1;var i=e.targetTouches[0].clientY-l.startpoint;!this.canPrev&&i>5&&(this.isScroll=!0),!this.canNext&&i<-5&&(this.isScroll=!0),!this.isScroll&&e.preventDefault(),this.opt.dragMode&&this.canSlide&&1!=this.isScroll&&(i<-5&&this.count>this.page&&this.canNext&&(this.items[this.page-1].style.transform="translate3d(0, "+i.toFixed(2)+"px, 0)",this.items[this.page].style.transform="translate3d(0, "+(t.innerHeight+i).toFixed(2)+"px, 0)",l.endpoint=e.targetTouches[0].clientY),i>5&&this.page>1&&this.canPrev&&(this.items[this.page-2].style.transform="translate3d(0, -"+(t.innerHeight-i).toFixed(2)+"px, 0)",this.items[this.page-1].style.transform="translate3d(0, "+i.toFixed(2)+"px, 0)",l.endpoint=e.targetTouches[0].clientY)),this.opt.dragMode||(l.endpoint=e.targetTouches[0].clientY)},touchEnd:function(e){if(0===l.endpoint||-1===l.startpoint)return!1;var i=l.endpoint-l.startpoint;if(this.opt.dragMode){var s=t.innerHeight/4;i<-1*s?this.canSlide&&this.canNext&&this.slideNext():i>s?this.canSlide&&this.canPrev&&this.slidePrev():i>-1*s&&i<s&&d.resetSlideForDrag.call(this)}else l.endpoint-l.startpoint<-60?this.canSlide&&this.canNext&&this.slideNext():l.endpoint-l.startpoint>60&&this.canSlide&&this.canPrev&&this.slidePrev();l.startpoint=0,l.endpoint=0},transitionEnd:function(t){t.target.isEqualNode(this.items[this.page-1])&&(this.opt.dragMode&&(this.items[this.page-1].classList.remove("transition"),this.items[this.page-2]&&this.items[this.page-2].classList.remove("transition"),this.items[this.page]&&this.items[this.page].classList.remove("transition")),"next"==this.direction?(this.opt.after(this.page-1,this.direction,this.page),this.opt.refresh&&d.resetAnimation.call(this,this.page-2)):"prev"==this.direction&&(this.opt.after(this.page+1,this.direction,this.page),this.opt.refresh&&d.resetAnimation.call(this,this.page)),this.canSlide=!0)}},d={slideScroll:function(e,i){var s=this.items[e].children[0].offsetHeight,n=t.innerHeight,a=function(e){var i=t.innerHeight,n=s==this.items[e].scrollTop+i,a=0==this.items[e].scrollTop;this.canPrev=a&&!n,this.canNext=n&&!a,this.isScroll=!(n||a)}.bind(this,e);"removeListener"!=i?s-n>10?(this.items[e].children[0].children[0].focus(),a(),"next"==this.direction?this.items[e].scrollTop=0:"prev"==this.direction&&(this.items[e].scrollTop=s-n),this.items[e].addEventListener("scroll",a)):(this.canPrev=!0,this.canNext=!0,this.isScroll=!1):this.items[e].removeEventListener("scroll",a)},resetSlideForDrag:function(){this.canSlide=!1,this.items[this.page-1].classList.add("transition"),this.items[this.page-1].style.transform="translate3d(0, 0, 0)",this.items[this.page-2]&&(this.items[this.page-2].classList.add("transition"),this.items[this.page-2].style.transform="translate3d(0, -100%, 0)"),this.items[this.page]&&(this.items[this.page].classList.add("transition"),this.items[this.page].style.transform="translate3d(0, 100%, 0)")},resetAnimation:function(e){if(this.opt.useAnimation&&this.opt.refresh){if(!this.items[e])return!1;var i=this.items[e].querySelectorAll(".step"),s=this.items[e].querySelectorAll(".lazy");if(i.length>0){var n=!0,a=!1,r=void 0;try{for(var o,l=Array.prototype.slice.call(i)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){(m=o.value).style.visibility="hidden",m.style.animationName="__"+t.getComputedStyle(m).animationName}}catch(t){a=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}}if(s.length>0){var h=!0,c=!1,d=void 0;try{for(var p,u=Array.prototype.slice.call(s)[Symbol.iterator]();!(h=(p=u.next()).done);h=!0){var m;(m=p.value).style.visibility="hidden",m.style.animationName="__"+t.getComputedStyle(m).animationName}}catch(t){c=!0,d=t}finally{try{!h&&u.return&&u.return()}finally{if(c)throw d}}}}},runAnimation:function(t,e){if(this.opt.useAnimation){var i=function(t){var e=t.getAttribute("data-delay")||100,i=setTimeout(function(){t.style.visibility="",t.style.animationName="",clearTimeout(i)},e)},s=this.items[t].querySelectorAll(e||".step"),n=!0,a=!1,r=void 0;try{for(var o,l=Array.prototype.slice.call(s)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){i(o.value)}}catch(t){a=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}}},initAnimation:function(e,i){if(this.opt.useAnimation){var s=this.container.querySelectorAll(".step"),n=this.container.querySelectorAll(".lazy");if(s.length>0){var a=!0,r=!1,o=void 0;try{for(var l,h=Array.prototype.slice.call(s)[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){(v=l.value).style.visibility="hidden",v.style.animationName="__"+t.getComputedStyle(v).animationName}}catch(t){r=!0,o=t}finally{try{!a&&h.return&&h.return()}finally{if(r)throw o}}}if(n.length>0){var c=!0,p=!1,u=void 0;try{for(var m,f=Array.prototype.slice.call(n)[Symbol.iterator]();!(c=(m=f.next()).done);c=!0){var v;(v=m.value).style.visibility="hidden",v.style.animationName="__"+t.getComputedStyle(v).animationName}}catch(t){p=!0,u=t}finally{try{!c&&f.return&&f.return()}finally{if(p)throw u}}}d.runAnimation.call(this,i)}for(var y,g=0;y=this.items[g];g++)g===i?y.style.transform="translate3d(0, 0, 0)":g<i?y.style.transform="translate3d(0, -100%, 0)":g>i&&(y.style.transform="translate3d(0, 100%, 0)"),this.opt.dragMode||function(t){var e=setTimeout(function(){t.classList&&t.classList.add instanceof Function&&t.classList.add("transition"),clearTimeout(e)})}(y)},initEvent:function(){this.opt.useWheel&&(e.addEventListener("DOMMouseScroll",this.eventHandler.wheelFunc,!!i&&{passive:!0}),e.addEventListener("mousewheel",this.eventHandler.wheelFunc,!!i&&{passive:!0})),this.opt.useSwipe&&(l={startpoint:0,endpoint:0},this.container.addEventListener("touchstart",this.eventHandler.touchStart,!!i&&{passive:!0}),this.container.addEventListener("touchmove",this.eventHandler.touchMove),this.container.addEventListener("touchend",this.eventHandler.touchEnd,!!i&&{passive:!0})),this.container.addEventListener("transitionend",this.eventHandler.transitionEnd)}},p=function(t){var i={page:1*n("page")||1,slidePages:".slide-page",slideContainer:".slide-container",after:function(){},before:function(){},refresh:!1,useWheel:!0,useSwipe:!0,useAnimation:!0,dragMode:!1};this.canSlide=!0,this.canNext=!0,this.canPrev=!0,this.isScroll=!1,this.opt=a(i,t),this.page=this.opt.page,this.container=o(this.opt.slideContainer)?this.opt.slideContainer:e.querySelector(this.opt.slideContainer),this.items=o(this.opt.slidePages)?this.opt.slidePages:e.querySelectorAll(this.opt.slidePages),this.count=this.items.length,this.direction="",this.eventHandler={};for(var s in c)this.eventHandler[s]=c[s].bind(this);d.initEvent.call(this),d.slideScroll.call(this,this.page-1),d.initAnimation.call(this,this.items,this.page-1),this.slideTo(this.page)};return p.prototype.slideNext=function(t){if(this.count<=this.page)return!1;this.opt.dragMode&&(this.items[this.page-1].classList.add("transition"),this.items[this.page].classList.add("transition")),this.direction="next",d.slideScroll.call(this,this.page-1,"removeListener"),d.slideScroll.call(this,this.page),this.items[this.page-1].style.transform="translate3d(0, -100%, 0)",this.items[this.page].style.transform="translate3d(0, 0, 0)",this.page++,this.opt.before(this.page-1,this.direction,this.page),t||(this.canSlide=!1,d.runAnimation.call(this,this.page-1))},p.prototype.slidePrev=function(t){if(1>=this.page)return!1;this.opt.dragMode&&(this.items[this.page-2].classList.add("transition"),this.items[this.page-1].classList.add("transition")),this.direction="prev",d.slideScroll.call(this,this.page-1,"removeListener"),d.slideScroll.call(this,this.page-2),this.items[this.page-2].style.transform="translate3d(0, 0, 0)",this.items[this.page-1].style.transform="translate3d(0, 100%, 0)",this.page--,this.opt.before(this.page+1,this.direction,this.page),t||(this.canSlide=!1,d.runAnimation.call(this,this.page-1))},p.prototype.slideTo=function(t){if(t>=1&&t<=this.count){if(t==this.page)return!1;if(t>this.page){for(var e=this.page+1;e<t;e++)this.slideNext("optimize");this.slideNext()}else if(t<this.page){for(e=this.page-1;e>t;e--)this.slidePrev("optimize");this.slidePrev()}}},p.prototype.slideFire=function(t){var e=t?t-1:this.page-1;d.runAnimation.call(this,e,".lazy")},p.prototype.destroy=function(){if(this.opt.useAnimation){this.items.length;var t=this.container.querySelectorAll(".step"),i=this.container.querySelectorAll(".lazy");if(t.length>0){var s=!0,n=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done);s=!0){r.value.style.visibility=""}}catch(t){n=!0,a=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw a}}}if(i.length>0){var l=!0,h=!1,c=void 0;try{for(var p,u=i[Symbol.iterator]();!(l=(p=u.next()).done);l=!0){p.value.style.visibility=""}}catch(t){h=!0,c=t}finally{try{!l&&u.return&&u.return()}finally{if(h)throw c}}}d.runAnimation.call(this,0)}if(this.opt.useWheel&&(e.removeEventListener("DOMMouseScroll",this.eventHandler.wheelFunc),e.removeEventListener("mousewheel",this.eventHandler.wheelFunc),this.items[this.page-1].style.transform="translate3d(0, 0, 0)"),this.opt.useSwipe){this.container.removeEventListener("touchstart",this.eventHandler.touchStart),this.container.removeEventListener("touchmove",this.eventHandler.touchMove),this.container.removeEventListener("touchend",this.eventHandler.touchEnd)}this.container.removeEventListener("transitionend",this.eventHandler.transitionEnd)},p.prototype.update=function(t){this.canSlide=!0,this.canNext=!0,this.canPrev=!0;for(var i=o(t)?t:e.querySelectorAll(this.opt.slidePages),s=0,n=i.length;s<n;s++){if(this.items[this.page-1]&&r(this.items[this.page-1],i[s])){this.page=s+1;break}s===n-1&&(this.page=1)}this.items=i,this.count=this.items.length,this.slideTo(this.page),d.initAnimation.call(this,this.items,this.page-1),d.slideScroll.call(this,this.page-1)},p});